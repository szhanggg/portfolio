---
interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Stephen Zhang's Website" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>
  <body class="text-black bg-white dark:text-white dark:bg-darkbg">
    <slot />
  </body>
</html>

<style is:global>
  :root {
    --primary: #0ea4e8;
    --secondary: #f573b6;
    --tertiary: #6267f1;
    --darkbg: #0a1121;
    --text: #94a3b8;
  }

  p {
    color: var(--text);
  }

  @font-face {
    font-family: "Gotham";
    src: url("/fonts/GothamMedium.ttf");
    font-weight: normal;
    font-style: normal;
  }

  @font-face {
    font-family: "Gotham";
    src: url("/fonts/GothamBold.ttf");
    font-weight: bold;
    font-style: normal;
  }

  @font-face {
    font-family: "SF Pro";
    src: url("/fonts/SFPRODISPLAYBOLD.OTF");
    font-weight: bold;
    font-style: normal;
  }

  @font-face {
    font-family: "SF Pro";
    src: url("/fonts/SFPRODISPLAYREGULAR.OTF");
    font-weight: normal;
    font-style: normal;
  }

  html.lenis {
    height: auto;
  }

  .lenis.lenis-smooth {
    scroll-behavior: auto;
  }

  .lenis.lenis-smooth [data-lenis-prevent] {
    overscroll-behavior: contain;
  }

  .lenis.lenis-stopped {
    overflow: hidden;
  }

  .lenis.lenis-scrolling iframe {
    pointer-events: none;
  }
</style>

<script>
  import Lenis from "@studio-freight/lenis";
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  const lenis = new Lenis();

  function raf(time) {
    lenis.raf(time);
    requestAnimationFrame(raf);
  }

  requestAnimationFrame(raf);

  gsap.registerPlugin(ScrollTrigger);

  var t1 = gsap.timeline();

  t1.from(
    "#timeline",
    {
      height: 0,
      duration: 2,
      ease: "ease-in",
    },
    ">"
  );
  t1.from(
    "#start",
    {
      x: "-100",
      duration: 0.5,
      opacity: 0,
    },
    "<0.5"
  );

  t1.from(
    "#fp-name",
    {
      x: "-110%",
      duration: 1,
      opacity: 0,
    },
    "<0.5"
  );
  t1.from(
    "#fp-sub",
    {
      x: "-110%",
      duration: 1,
      opacity: 0,
    },
    "<0.5"
  );

  const projects = ["mchackathon", "onlyblair"];

  projects.forEach((project) => {
    gsap.from("#" + project, {
      x: "-200%",
      duration: 1,
      opacity: 0,
      scrollTrigger: {
        trigger: "#" + project,
        start: "top 80%",
        end: "bottom 80%",
        scrub: 1,
      },
    });
  });

  gsap.from("#about-header", {
    x: "-100%",
    duration: 0.5,
    opacity: 0,
    scrollTrigger: {
      trigger: "#about-header",
      start: "top 90%",
      end: "bottom 75%",
      scrub: true,
    },
  });

  gsap.from("#about-text1", {
    x: "-100%",
    duration: 0.5,
    opacity: 0,
    scrollTrigger: {
      trigger: "#about-text1",
      start: "top 90%",
      end: "bottom 75%",
      scrub: true,
    },
  });

  gsap.from("#about-text2", {
    x: "-100%",
    duration: 0.5,
    opacity: 0,
    scrollTrigger: {
      trigger: "#about-text2",
      start: "top 90%",
      end: "bottom 75%",
      scrub: true,
    },
  });

  var navlinks = document.getElementsByClassName("navlink");

  for (let navlink of Array.from(navlinks)) {
    navlink.addEventListener("click", (e) => {
      let target = navlink.getAttribute("href");
      e.preventDefault();
      lenis.scrollTo(target);
    });
    let target = navlink.getAttribute("href");
    gsap.from(target, {
      x: -100,
      duration: 0.5,
      opacity: 0,
      scrollTrigger: {
        trigger: target,
        start: "top 90%",
        end: "bottom 80%",
        scrub: true,
      },
    });
  }
</script>
